<!-- Script à coller tout en bas de la page “Choisir un profil”, juste avant </body> -->
<script>
(function(){
  const btn = document.getElementById("openProfil"); // ton bouton existant
  if(!btn) return;

  const nodes = Array.from(document.querySelectorAll(".node"));
  if(!nodes.length) return;

  let timer = null;
  let running = false;

  function pickRandomNode(){
    const i = Math.floor(Math.random() * nodes.length);
    return nodes[i];
  }

  function startBlink(){
    if(running) return;
    running = true;

    timer = setInterval(() => {
      const n = pickRandomNode();
      n.classList.add("blink");
      setTimeout(() => n.classList.remove("blink"), 520);
    }, 420);
  }

  function stopBlink(){
    running = false;
    if(timer) clearInterval(timer);
    timer = null;
    nodes.forEach(n => n.classList.remove("blink"));
  }

  // Quand tu actives “Choisir un profil”
  btn.addEventListener("click", () => {
    startBlink();
  });

  // Dès qu’on clique sur un type, on arrête
  nodes.forEach(n => {
    n.addEventListener("click", () => {
      stopBlink();
    });
  });

  // Si tu reviens en arrière / change de page
  window.addEventListener("pagehide", stopBlink);
})();
</script>
