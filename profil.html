<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Profil Ennéagramme</title>
  <style>
    :root{
      --bg1: rgba(139,211,255,.16);
      --bg2: rgba(159,242,177,.10);
      --line: rgba(255,255,255,.12);
      --line2: rgba(255,255,255,.18);
      --panel: rgba(255,255,255,.06);
      --panel2: rgba(255,255,255,.08);
      --txt: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.60);
      --radius: 18px;
      --good: rgba(159,242,177,.95);
      --mid: rgba(255,209,139,.95);
      --bad: rgba(255,139,139,.95);
      --accent: #8bd3ff;
    }

    body{
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, sans-serif;
      background:
        radial-gradient(1200px 800px at 25% 15%, rgba(139,211,255,.20), transparent 55%),
        radial-gradient(1000px 700px at 80% 25%, rgba(159,242,177,.12), transparent 55%),
        linear-gradient(180deg, #081022, #070b14);
      color: var(--txt);
      min-height: 100vh;
    }

    .wrapX{max-width:1200px;margin:0 auto;padding:22px; padding-bottom: 80px;}

    .hero{
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border-radius: var(--radius);
      padding:18px;
      backdrop-filter: blur(10px);
    }

    .heroTop{
      display:flex; align-items:flex-start; justify-content:space-between; gap:14px; flex-wrap:wrap;
    }

    .hero h1{margin:0;font-size:26px;letter-spacing:.2px}
    .hero p{margin:6px 0 0;color:var(--muted);line-height:1.35}

    .heroBtns{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}

    .btnX{
      display:inline-flex;align-items:center;gap:8px;
      padding:10px 12px;border-radius:999px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.06);
      color: var(--txt);
      text-decoration:none;
      font-weight:700;
      font-size:13px;
      transition: transform .04s ease, background .18s ease, border-color .18s ease;
      cursor: pointer;
    }
    .btnX:hover{background: rgba(255,255,255,.10); border-color: rgba(255,255,255,.22)}
    .btnX:active{transform: translateY(1px)}

    .grid{
      display:grid; 
      grid-template-columns: 1.3fr 0.7fr; 
      gap:16px; margin-top:16px;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns:1fr; }
      .heroBtns{justify-content:flex-start}
    }

    .panel{
      border:1px solid var(--line);
      background: rgba(255,255,255,.05);
      border-radius: var(--radius);
      overflow:hidden;
      height: fit-content;
    }
    .panelHead{
      padding:14px 16px;
      border-bottom:1px solid var(--line);
      background: rgba(255,255,255,.04);
      display:flex;align-items:center;justify-content:space-between;gap:12px;
    }
    .panelHead h2{margin:0;font-size:16px}
    .pill{
      font-size:12px;color:var(--muted);
      border:1px solid var(--line);
      padding:6px 10px;border-radius:999px;
      background: rgba(255,255,255,.04);
      white-space:nowrap;
    }
    .panelBody{padding:14px 16px}

    .detailsList{display:grid;gap:10px}
    details{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.15);
      border-radius:14px; overflow:hidden;
    }
    summary{
      list-style:none; cursor:pointer; padding:14px 14px;
      display:flex;align-items:center;justify-content:space-between;gap:12px;
      font-weight:700;
      background: rgba(255,255,255,.02);
    }
    summary::-webkit-details-marker{display:none}
    
    .secNum{
      display:inline-flex;align-items:center;justify-content:center;
      min-width:24px;height:24px; border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--muted); font-weight:700; font-size:11px;
    }
    .secBody{
      border-top:1px solid rgba(255,255,255,.10);
      padding:16px;
      line-height:1.6; 
      color: var(--txt);
      font-size: 14.5px;
    }
    .secBody p{margin:0 0 12px}
    .secBody ul{margin:8px 0 12px 20px; padding-left:0;}
    .secBody li{margin-bottom:8px; list-style-type: none; position: relative; padding-left: 15px;}
    .secBody li::before {
      content: "•"; color: var(--accent); font-weight: bold; position: absolute; left: 0;
    }
    .secBody b, .secBody strong { color: var(--accent); font-weight: 700; }
    .titleTint{ color: var(--accent); font-size: 15px; }

    .lvlTitle{ margin:0; font-size:18px; letter-spacing:.2px; }
    .lvlBadge{
      display:inline-flex;align-items:center;gap:8px;
      border:1px solid var(--line);
      background: rgba(255,255,255,.05);
      padding:7px 10px;border-radius:999px;
      color: var(--muted); font-size:13px; margin-top:10px;
    }
    .lvlBadge .dot2{width:10px;height:10px;border-radius:999px;background: var(--good)}
    .lvlBadge b{color: var(--txt)}

    .rangeWrap{
      margin-top:14px; padding:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.10);
      border-radius:14px;
    }
    .rangeTop{ display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap; }
    .rangeTop .n{
      display:inline-flex;align-items:center;justify-content:center;
      min-width:44px; font-weight:900;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      border-radius:12px; padding:8px 10px; font-size:13px;
    }
    input[type="range"]{width:100%; margin-top:10px;}
    .rangeTrackHint{
      margin-top:10px; height:6px; border-radius:999px;
      background: linear-gradient(90deg, var(--good) 33%, var(--mid) 33% 66%, var(--bad) 66%);
      opacity:.5;
    }
    .legend{
      margin-top:10px; display:flex;justify-content:space-between;gap:10px;flex-wrap:wrap;
      color: var(--muted); font-size:12px;
    }
    .legend .k{display:flex;align-items:center;gap:8px}
    .tag{width:10px;height:10px;border-radius:999px}
    .tag.good{background: var(--good)}
    .tag.mid{background: var(--mid)}
    .tag.bad{background: var(--bad)}

    .lvlDesc{
      margin-top:12px; padding:14px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
      border-radius:14px; line-height:1.5;
    }
    .lvlNav{ margin-top:12px; display:flex;gap:10px;flex-wrap:wrap; }

    .siteFooter{margin-top:28px;padding:18px 12px;text-align:center;font-size:12px;opacity:.78}
    .siteFooter a{color:inherit;text-decoration:none;border-bottom:1px dotted currentColor}

    .bottomBar{
      position:fixed; left:0;right:0;bottom:0;
      background:rgba(8,12,24,.85);
      border-top:1px solid rgba(255,255,255,.10);
      backdrop-filter: blur(10px);
      padding:10px 12px; z-index:999;
    }
    .barInner{
      max-width:1100px; margin:0 auto;
      display:flex; gap:10px; align-items:center; justify-content:space-between; flex-wrap:wrap;
    }
    .barBtns{display:flex;gap:10px;flex-wrap:wrap}
  </style>
</head>

<body>
  <div class="wrapX">
    <section class="hero">
      <div class="heroTop">
        <div>
          <h1 id="pageTitle">Profil</h1>
          <p id="pageSub" class="muted">—</p>
        </div>
        <div class="heroBtns">
          <a class="btnX" href="test-enneagramme-sans-indice.html" style="border-color:var(--accent); color:var(--accent);">Retour au Test</a>
          <a class="btnX" href="explore.html">Retour Explorer</a>
          <a class="btnX" href="index.html">Diagramme</a>
        </div>
      </div>
    </section>

    <main class="grid">
      <aside class="panel">
        <div class="panelHead"><h2>Fiche de lecture</h2></div>
        <div class="panelBody">
          <div class="detailsList" id="sections"></div>
        </div>
      </aside>

      <section class="panel">
        <div class="panelHead">
          <h2>Niveaux de conscience</h2>
          <div class="pill">État actuel</div>
        </div>
        <div class="panelBody">
          <p class="muted" id="levelsIntro" style="margin:0 0 10px; font-size:13px;"></p>
          <h3 class="lvlTitle" id="lvlTitle">Niveau 1</h3>
          <div class="lvlBadge"><span class="dot2" id="lvlDot"></span><b id="lvlBadge">Sain</b></div>
          <div class="rangeWrap">
            <div class="rangeTop"><div class="muted">Choisis ton niveau</div><div class="n" id="lvlNumBox">1</div></div>
            <div style="margin-top:10px">
              <input id="lvlRange" type="range" min="1" max="9" step="1" value="1" />
              <div class="rangeTrackHint" aria-hidden="true"></div>
              <div class="legend">
                <span class="k"><span class="tag good"></span>1–3 Sain</span>
                <span class="k"><span class="tag mid"></span>4–6 Moyen</span>
                <span class="k"><span class="tag bad"></span>7–9 Malsain</span>
              </div>
            </div>
            <div class="lvlDesc" id="lvlDesc">...</div>
            <div class="lvlNav">
              <button class="btnX" id="btnPrev" type="button">Précédent</button>
              <button class="btnX" id="btnNext" type="button">Suivant</button>
            </div>
          </div>
        </div>
      </section>
    </main>

    <div class="bottomBar">
      <div class="barInner">
        <div class="barBtns">
           <a class="btnX" href="test-enneagramme-sans-indice.html">Retour au Test</a>
           <a class="btnX" href="index.html">Accueil</a>
        </div>
        <div style="font-size:12px; color:var(--muted)" id="barInfo">Ennéagramme</div>
      </div>
    </div>
  </div>

  <script>
    // --- BASE DE DONNÉES COMPLÈTE TYPES 1 À 9 ---
    const TYPES = {
      1: {
        title: "Type 1 – Le Perfectionniste",
        sub: "Le Réformateur, l'Idéaliste",
        levelsIntro: "Du discernement sage à la punition obsessionnelle.",
        levels: { 1: "Sagesse et acceptation : Abandonne le jugement, accepte la réalité telle qu'elle est.", 2: "Raison et évaluation : Guidé par la conscience, raisonnable et modéré.", 3: "Responsabilité : Hautement éthique, discipliné, enseigne par l'exemple.", 4: "Obligation : Devient critique, craint l'erreur, travaille dur par devoir.", 5: "Ordre et contrôle : Tendu, organisé à l'extrême, peur d'être pris en défaut.", 6: "Jugement : Critique envers les autres, moralisateur, jamais satisfait.", 7: "Intolérance : Dogmatique, inflexible, ne supporte aucune déviation.", 8: "Obsession : Pensées compulsives sur l'imperfection, actions contradictoires.", 9: "Punition : Condamnation sévère de soi et des autres, risques destructeurs." },
        sections: [
          { t: "Présentation", b: "<p>Le Type 1 est une personnalité <b>idéaliste et rationnelle</b>, animée par des principes solides.</p><ul><li><b>Désir :</b> Être intègre et équilibré.</li><li><b>Peur :</b> Être mauvais ou corrompu.</li></ul>" },
          { t: "Structure et dynamique", b: "<ul><li><b>Centre :</b> Instinctif.</li><li><b>Passion :</b> Colère (Ressentiment).</li><li><b>Fixation :</b> Perfectionnisme.</li><li><b>Défense :</b> Formation réactionnelle.</li></ul>" },
          { t: "Sous-types", b: "<ul><li><b>Conservation :</b> Anxiété, contrôle.</li><li><b>Social :</b> Inadaptabilité, le croisé.</li><li><b>Sexuel :</b> Jalousie, perfection relationnelle.</li></ul>" },
          { t: "Flèches", b: "<ul><li><b>Stress (→4) :</b> Mélancolie, repli.</li><li><b>Santé (→7) :</b> Joie, spontanéité.</li></ul>" },
          { t: "Évolution", b: "<p>Accepter l'imperfection, pratiquer la détente.</p>" }
        ]
      },
      2: {
        title: "Type 2 – L'Altruiste",
        sub: "L'Aidant, le Donneur",
        levelsIntro: "De l'amour inconditionnel à la manipulation.",
        levels: { 1: "Amour inconditionnel : Prend soin de soi et des autres sans attente.", 2: "Empathie : Attentionné, effusif, cherche à être proche.", 3: "Générosité : Donne concrètement, mais veut être apprécié.", 4: "Volonté de plaire : Se rend indispensable, flatterie.", 5: "Possessivité : Intrusif, envahissant, donne pour recevoir.", 6: "Orgueil : Se plaint, culpabilise les autres, importance de soi.", 7: "Manipulation : Utilise la pitié pour créer la dépendance.", 8: "Coercition : Exige l'amour, colère hystérique.", 9: "Victimisation : S'effondre pour obliger la prise en charge." },
        sections: [
          { t: "Présentation", b: "<p>Le Type 2 est <b>chaleureux et tourné vers les autres</b>. Il cherche l'amour en se rendant indispensable.</p><ul><li><b>Désir :</b> Être aimé.</li><li><b>Peur :</b> Être indigne d'amour.</li></ul>" },
          { t: "Structure et dynamique", b: "<ul><li><b>Centre :</b> Émotionnel (Extérieur).</li><li><b>Passion :</b> Orgueil.</li><li><b>Fixation :</b> Flatterie.</li><li><b>Défense :</b> Répression des besoins.</li></ul>" },
          { t: "Sous-types", b: "<ul><li><b>Conservation :</b> Privilège (Charme enfantin).</li><li><b>Social :</b> Ambition (Influence).</li><li><b>Sexuel :</b> Conquête (Séduction).</li></ul>" },
          { t: "Flèches", b: "<ul><li><b>Stress (→8) :</b> Colère, reproches.</li><li><b>Santé (→4) :</b> Authenticité émotionnelle.</li></ul>" },
          { t: "Évolution", b: "<p>Reconnaître ses propres besoins, oser dire non.</p>" }
        ]
      },
      3: {
        title: "Type 3 – Le Battant",
        sub: "Le Réalisateur, l'Exécutant",
        levelsIntro: "De l'authenticité à la monomanie.",
        levels: { 1: "Authenticité : Se valorise pour ce qu'il est, vrai.", 2: "Confiance : Compétent, modèle de réussite.", 3: "Performance : Efficace, orienté objectifs.", 4: "Course au succès : Peur de l'échec, se vend, travaille trop.", 5: "Image : Souci des apparences, caméléon froid.", 6: "Narcissisme : Arrogance, compétition féroce.", 7: "Tromperie : Mensonge pour sauver la face, vide.", 8: "Opportunisme : Exploitation, trahison.", 9: "Monomanie : Vindicatif, destruction des témoins de l'échec." },
        sections: [
          { t: "Présentation", b: "<p>Le Type 3 est <b>orienté succès et image</b>. Il veut être admiré pour ses réalisations.</p><ul><li><b>Désir :</b> Être précieux et admiré.</li><li><b>Peur :</b> L'échec.</li></ul>" },
          { t: "Structure et dynamique", b: "<ul><li><b>Centre :</b> Émotionnel.</li><li><b>Passion :</b> Mensonge/Vanité.</li><li><b>Fixation :</b> Vanité.</li><li><b>Défense :</b> Identification.</li></ul>" },
          { t: "Sous-types", b: "<ul><li><b>Conservation :</b> Sécurité (Accumulation).</li><li><b>Social :</b> Prestige (Titres).</li><li><b>Sexuel :</b> Charisme (Masculin/Féminin).</li></ul>" },
          { t: "Flèches", b: "<ul><li><b>Stress (→9) :</b> Apathie, blocage.</li><li><b>Santé (→6) :</b> Loyauté, coopération.</li></ul>" },
          { t: "Évolution", b: "<p>Ralentir, être honnête sur ses faiblesses.</p>" }
        ]
      },
      4: {
        title: "Type 4 – L'Individualiste",
        sub: "Le Romantique, l'Artiste",
        levelsIntro: "De l'inspiration créatrice au désespoir.",
        levels: { 1: "Inspiration : Crée à partir de l'universel.", 2: "Sensibilité : Introspectif, raffiné.", 3: "Créativité : Exprime ses sentiments, authentique.", 4: "Romantisme : Dramatise, s'attache à la mélancolie.", 5: "Repli : Timide, s'isole, envieux.", 6: "Exception : Se sent exempté des règles, humeurs.", 7: "Aliénation : Déprimé, haine de soi.", 8: "Tourment : Angoisse, sabotage.", 9: "Désespoir : Autodestruction." },
        sections: [
          { t: "Présentation", b: "<p>Le Type 4 est <b>sensible et unique</b>. Il cherche son identité et craint la banalité.</p><ul><li><b>Désir :</b> Être soi-même.</li><li><b>Peur :</b> N'avoir aucune identité.</li></ul>" },
          { t: "Structure et dynamique", b: "<ul><li><b>Centre :</b> Émotionnel (Intérieur).</li><li><b>Passion :</b> Envie.</li><li><b>Fixation :</b> Mélancolie.</li><li><b>Défense :</b> Introjection.</li></ul>" },
          { t: "Sous-types", b: "<ul><li><b>Conservation :</b> Ténacité (Endure en silence).</li><li><b>Social :</b> Honte (L'Outsider).</li><li><b>Sexuel :</b> Compétition (Haine).</li></ul>" },
          { t: "Flèches", b: "<ul><li><b>Stress (→2) :</b> Dépendance affective.</li><li><b>Santé (→1) :</b> Discipline, action.</li></ul>" },
          { t: "Évolution", b: "<p>Discipline, action, ne pas s'identifier aux émotions.</p>" }
        ]
      },
      5: {
        title: "Type 5 – L'Observateur",
        sub: "Le Penseur, L'Investigateur",
        levelsIntro: "De la vision claire à l'isolation.",
        levels: { 1: "Visionnaire : Perçoit la réalité avec clarté.", 2: "Perception : Observateur attentif, curieux.", 3: "Expertise : Maîtrise des sujets, innovant.", 4: "Conceptualisation : Se prépare sans agir, vit dans sa tête.", 5: "Détachement : S'isole, minimise ses besoins, secret.", 6: "Cynisme : Provocateur, vision noire.", 7: "Nihilisme : Coupe les ponts, excentrique.", 8: "Terreur : Paranoïa, fuite totale.", 9: "Autodestruction : Annihilation du moi." },
        sections: [
          { t: "Présentation", b: "<p>Le Type 5 est <b>cérébral et secret</b>. Il observe pour comprendre et se protéger.</p><ul><li><b>Désir :</b> Être compétent.</li><li><b>Peur :</b> Être inutile ou envahi.</li></ul>" },
          { t: "Structure et dynamique", b: "<ul><li><b>Centre :</b> Mental (Extérieur).</li><li><b>Passion :</b> Avarice (de soi).</li><li><b>Fixation :</b> Détachement.</li><li><b>Défense :</b> Isolation.</li></ul>" },
          { t: "Sous-types", b: "<ul><li><b>Conservation :</b> Refuge (Château fort).</li><li><b>Social :</b> Totem (Savoir élitiste).</li><li><b>Sexuel :</b> Confidence (Intimité secrète).</li></ul>" },
          { t: "Flèches", b: "<ul><li><b>Stress (→7) :</b> Dispersion, agitation.</li><li><b>Santé (→8) :</b> Action, confiance.</li></ul>" },
          { t: "Évolution", b: "<p>Revenir dans le corps, partager, oser le lien.</p>" }
        ]
      },
      6: {
        title: "Type 6 – Le Loyaliste",
        sub: "Le Gardien, Le Sceptique",
        levelsIntro: "Du courage à la panique.",
        levels: { 1: "Courage : Guidé par sa propre autorité intérieure.", 2: "Engagement : Fiable, protecteur.", 3: "Loyauté : Dévoué, responsable.", 4: "Doute : Vigilant, besoin de règles.", 5: "Ambivalence : Méfiant, pessimiste, défensif.", 6: "Réactivité : Autoritaire ou soumis, blâme.", 7: "Panique : Cherche un sauveur, dépendance.", 8: "Paranoïa : Se sent persécuté.", 9: "Autodestruction : S'abandonne pour apaiser l'angoisse." },
        sections: [
          { t: "Présentation", b: "<p>Le Type 6 est <b>vigilant et loyal</b>. Il cherche la sécurité et le soutien.</p><ul><li><b>Désir :</b> Sécurité.</li><li><b>Peur :</b> Être sans soutien.</li></ul>" },
          { t: "Structure et dynamique", b: "<ul><li><b>Centre :</b> Mental.</li><li><b>Passion :</b> Peur.</li><li><b>Fixation :</b> Doute/Suspicion.</li><li><b>Défense :</b> Projection.</li></ul>" },
          { t: "Sous-types", b: "<ul><li><b>Conservation :</b> Chaleur (Désarmer).</li><li><b>Social :</b> Devoir (Règles).</li><li><b>Sexuel :</b> Force (Contre-phobique).</li></ul>" },
          { t: "Flèches", b: "<ul><li><b>Stress (→3) :</b> Hyperactivité.</li><li><b>Santé (→9) :</b> Détente, confiance.</li></ul>" },
          { t: "Évolution", b: "<p>Faire confiance à sa guidance intérieure, calmer le mental.</p>" }
        ]
      },
      7: {
        title: "Type 7 – L'Épicurien",
        sub: "L'Enthousiaste, Le Généraliste",
        levelsIntro: "De la gratitude à la paralysie.",
        levels: { 1: "Gratitude : S'émerveille de l'instant présent.", 2: "Enthousiasme : Spontané, productif.", 3: "Accomplissement : Polyvalent, pragmatique.", 4: "Consommation : Veut plus, peur de manquer.", 5: "Distraction : Fuit l'ennui, superficiel.", 6: "Excès : Égoïste, exigeant, insatisfait.", 7: "Fuite : Irresponsable, impulsif.", 8: "Manie : Frénésie, panique.", 9: "Paralysie : Bloqué par la peur." },
        sections: [
          { t: "Présentation", b: "<p>Le Type 7 est <b>optimiste et spontané</b>. Il veut tout expérimenter pour éviter la souffrance.</p><ul><li><b>Désir :</b> Être heureux.</li><li><b>Peur :</b> Être privé ou souffrir.</li></ul>" },
          { t: "Structure et dynamique", b: "<ul><li><b>Centre :</b> Mental (Intérieur).</li><li><b>Passion :</b> Gourmandise.</li><li><b>Fixation :</b> Planification.</li><li><b>Défense :</b> Rationalisation.</li></ul>" },
          { t: "Sous-types", b: "<ul><li><b>Conservation :</b> Le Clan (Famille).</li><li><b>Social :</b> Sacrifice (Idéaliste).</li><li><b>Sexuel :</b> Fascination (Intensité).</li></ul>" },
          { t: "Flèches", b: "<ul><li><b>Stress (→1) :</b> Rigidité, critique.</li><li><b>Santé (→5) :</b> Profondeur, concentration.</li></ul>" },
          { t: "Évolution", b: "<p>Rester dans le présent, accepter le négatif, aller au bout.</p>" }
        ]
      },
      8: {
        title: "Type 8 – Le Chef",
        sub: "Le Challenger, Le Protecteur",
        levelsIntro: "De la magnanimité à la destruction.",
        levels: { 1: "Magnanimité : Force noble, indulgent.", 2: "Assurance : Confiant, direct.", 3: "Leadership : Constructif, protecteur.", 4: "Pragmatisme : Risque, business, contrôle.", 5: "Domination : Impose sa volonté, force le respect.", 6: "Intimidation : Menace, belligérant.", 7: "Dictature : Immoral, écrase les autres.", 8: "Mégalomanie : Toute-puissance.", 9: "Destruction : Sociopathie, tout détruire." },
        sections: [
          { t: "Présentation", b: "<p>Le Type 8 est <b>puissant et dominant</b>. Il veut contrôler sa vie et protéger les siens.</p><ul><li><b>Désir :</b> Se protéger.</li><li><b>Peur :</b> Être blessé ou contrôlé.</li></ul>" },
          { t: "Structure et dynamique", b: "<ul><li><b>Centre :</b> Instinctif (Extérieur).</li><li><b>Passion :</b> Excès (Luxure).</li><li><b>Fixation :</b> Vengeance.</li><li><b>Défense :</b> Déni.</li></ul>" },
          { t: "Sous-types", b: "<ul><li><b>Conservation :</b> Satisfaction (Survie).</li><li><b>Social :</b> Solidarité (Le Protecteur).</li><li><b>Sexuel :</b> Possession (Intensité).</li></ul>" },
          { t: "Flèches", b: "<ul><li><b>Stress (→5) :</b> Retrait, froideur.</li><li><b>Santé (→2) :</b> Tendresse, ouverture.</li></ul>" },
          { t: "Évolution", b: "<p>Accepter sa vulnérabilité, attendre avant d'agir.</p>" }
        ]
      },
      9: {
        title: "Type 9 – Le Médiateur",
        sub: "Le Pacificateur",
        levelsIntro: "De la présence indomptable à l'effacement.",
        levels: { 1: "Présence : Indomptable, serein, connecté.", 2: "Réceptivité : Calme, écoute, accepte.", 3: "Soutien : Médiateur naturel, unifie.", 4: "Effacement : Dit oui pour ne pas faire de vagues.", 5: "Désengagement : Passif, têtu, repousse.", 6: "Résignation : Fataliste, minimise tout.", 7: "Négligence : Refoule, inefficace.", 8: "Dissociation : Brouillard, perte de contact.", 9: "Disparition : Catatonie, inexistence." },
        sections: [
          { t: "Présentation", b: "<p>Le Type 9 est <b>paisible et acceptant</b>. Il évite le conflit pour garder sa tranquillité.</p><ul><li><b>Désir :</b> Paix intérieure.</li><li><b>Peur :</b> Conflit, séparation.</li></ul>" },
          { t: "Structure et dynamique", b: "<ul><li><b>Centre :</b> Instinctif (Bloqué).</li><li><b>Passion :</b> Paresse (de soi).</li><li><b>Fixation :</b> Oubli de soi.</li><li><b>Défense :</b> Narcotisation.</li></ul>" },
          { t: "Sous-types", b: "<ul><li><b>Conservation :</b> Appétit (Confort).</li><li><b>Social :</b> Participation (Travail).</li><li><b>Sexuel :</b> Fusion (Symbiose).</li></ul>" },
          { t: "Flèches", b: "<ul><li><b>Stress (→6) :</b> Anxiété, doute.</li><li><b>Santé (→3) :</b> Action, objectifs.</li></ul>" },
          { t: "Évolution", b: "<p>S'affirmer, se rappeler que sa présence compte.</p>" }
        ]
      }
    };

    function getTypeFromQuery(){
      const p = new URLSearchParams(location.search);
      const n = parseInt(p.get("type") || "1", 10);
      return (n>=1 && n<=9) ? n : 1;
    }

    function rangeLabel(n){
      if (n <= 3) return "Sain";
      if (n <= 6) return "Moyen";
      return "Malsain";
    }
    function rangeColor(n){
      if (n <= 3) return getComputedStyle(document.documentElement).getPropertyValue("--good").trim() || "#86efac";
      if (n <= 6) return getComputedStyle(document.documentElement).getPropertyValue("--mid").trim() || "#fcd34d";
      return getComputedStyle(document.documentElement).getPropertyValue("--bad").trim() || "#fca5a5";
    }

    function init(){
      const t = getTypeFromQuery();
      const data = TYPES[t] || TYPES[1];

      document.title = data.title;
      document.getElementById("pageTitle").textContent = data.title;
      document.getElementById("pageSub").textContent = data.sub;
      document.getElementById("levelsIntro").textContent = data.levelsIntro || "Utilisez le curseur.";
      document.getElementById("barInfo").textContent = data.title;

      const secContainer = document.getElementById("sections");
      secContainer.innerHTML = "";
      
      if(!data.sections || data.sections.length === 0) {
         secContainer.innerHTML = "<div class='smallCard'>Contenu à venir...</div>";
      } else {
        data.sections.forEach((s, idx) => {
          const d = document.createElement("details");
          if(idx === 0) d.open = true;
          
          const sum = document.createElement("summary");
          sum.innerHTML = `<span class="titleTint">${s.t}</span>`;
          
          const body = document.createElement("div");
          body.className = "secBody";
          body.innerHTML = s.b; 

          d.appendChild(sum);
          d.appendChild(body);
          secContainer.appendChild(d);
        });
      }

      const slider = document.getElementById("lvlRange");
      const updateLevel = () => {
        const lvl = parseInt(slider.value, 10);
        const txt = (data.levels && data.levels[lvl]) ? data.levels[lvl] : "Information non disponible";
        const label = rangeLabel(lvl);
        const col = rangeColor(lvl);

        document.getElementById("lvlTitle").textContent = "Niveau " + lvl;
        document.getElementById("lvlBadge").textContent = label;
        document.getElementById("lvlDot").style.background = col;
        document.getElementById("lvlNumBox").textContent = lvl;
        document.getElementById("lvlDesc").textContent = txt;
      };

      slider.addEventListener("input", updateLevel);
      document.getElementById("btnPrev").onclick = () => { slider.value = Math.max(1, parseInt(slider.value)-1); updateLevel(); };
      document.getElementById("btnNext").onclick = () => { slider.value = Math.min(9, parseInt(slider.value)+1); updateLevel(); };

      updateLevel();
    }

    init();
  </script>
</body>
</html>
